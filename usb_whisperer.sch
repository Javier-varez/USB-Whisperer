EESchema Schematic File Version 4
EELAYER 30 0
EELAYER END
$Descr A4 11693 8268
encoding utf-8
Sheet 1 12
Title "USB Whisperer"
Date "2021-11-21"
Rev "A"
Comp "AllThingsEmbedded"
Comment1 "Javier Alvarez"
Comment2 ""
Comment3 ""
Comment4 ""
$EndDescr
$Sheet
S 8050 2150 950  1600
U 619A9DB6
F0 "Target USB" 50
F1 "target_usb.sch" 50
F2 "PRIMARY_D-" I L 8050 2400 50 
F3 "PRIMARY_D+" I L 8050 2300 50 
F4 "SECONDARY_D-" I L 8050 2650 50 
F5 "SECONDARY_D+" I L 8050 2550 50 
F6 "SBU1" I L 8050 2800 50 
F7 "SBU2" I L 8050 2900 50 
F8 "VBUS" I L 8050 3050 50 
F9 "SDA" I L 8050 3200 50 
F10 "SCL" I L 8050 3300 50 
F11 "INT_N" I L 8050 3400 50 
$EndSheet
$Sheet
S 3000 3700 800  500 
U 61B0D0F9
F0 "USB Device" 50
F1 "usb_device.sch" 50
F2 "USB_D-" B R 3800 4000 50 
F3 "USB_D+" B R 3800 3900 50 
F4 "VBUS" O L 3000 3950 50 
$EndSheet
$Sheet
S 5900 2200 1350 3650
U 61BE2A8A
F0 "Muxing" 50
F1 "muxing.sch" 50
F2 "USB_DEV_1_D-" B R 7250 2400 50 
F3 "USB_DEV_1_D+" B R 7250 2300 50 
F4 "USB_DEV_2_D-" B R 7250 2650 50 
F5 "USB_DEV_2_D+" B R 7250 2550 50 
F6 "SBU_1" B R 7250 2800 50 
F7 "SBU_2" B R 7250 2900 50 
F8 "UART1_TX" I L 5900 3850 50 
F9 "UART1_RX" O L 5900 3750 50 
F14 "I2C2_SCL" B L 5900 3500 50 
F15 "I2C2_SDA" B L 5900 3600 50 
F16 "BUS_1_OE_N" I L 5900 5400 50 
F17 "BUS_2_OE_N" I L 5900 5050 50 
F18 "BUS_3_OE_N" I L 5900 4700 50 
F19 "BUS_3_MUX_SEL_0" I L 5900 4500 50 
F20 "BUS_3_MUX_SEL_1" I L 5900 4600 50 
F21 "BUS_2_MUX_SEL_0" I L 5900 4850 50 
F22 "BUS_2_MUX_SEL_1" I L 5900 4950 50 
F23 "BUS_1_MUX_SEL_0" I L 5900 5200 50 
F24 "BUS_1_MUX_SEL_1" I L 5900 5300 50 
F25 "USB_MUX_SEL_0" I L 5900 5550 50 
F26 "USB_MUX_SEL_1" I L 5900 5650 50 
F27 "USB_OE_N" I L 5900 5750 50 
F28 "USB_AUX_D+" B L 5900 2300 50 
F29 "USB_AUX_D-" B L 5900 2400 50 
$EndSheet
Wire Wire Line
	5200 3500 5900 3500
Wire Wire Line
	5900 3600 5200 3600
Wire Wire Line
	5900 3750 5200 3750
Wire Wire Line
	5200 3850 5900 3850
Wire Wire Line
	7250 2300 8050 2300
Wire Wire Line
	8050 2400 7250 2400
Wire Wire Line
	7250 2550 8050 2550
Wire Wire Line
	8050 2650 7250 2650
Wire Wire Line
	7250 2800 8050 2800
Wire Wire Line
	8050 2900 7250 2900
Text Label 5300 3250 0    50   ~ 0
I2C1_SCL
Text Label 5300 3350 0    50   ~ 0
I2C1_SDA
Text Label 7650 3200 0    50   ~ 0
I2C1_SDA
Text Label 7650 3300 0    50   ~ 0
I2C1_SCL
Wire Wire Line
	8050 3400 7900 3400
Wire Wire Line
	7650 3200 8050 3200
Wire Wire Line
	8050 3300 7650 3300
Text Label 7650 3050 0    50   ~ 0
VBUS
Wire Wire Line
	7650 3050 8050 3050
Wire Wire Line
	3800 3100 4200 3100
Wire Wire Line
	4200 3000 3800 3000
$Comp
L power:GND #PWR01
U 1 1 61C1F3C5
P 4050 3300
F 0 "#PWR01" H 4050 3050 50  0001 C CNN
F 1 "GND" H 4055 3127 50  0000 C CNN
F 2 "" H 4050 3300 50  0001 C CNN
F 3 "" H 4050 3300 50  0001 C CNN
	1    4050 3300
	1    0    0    -1  
$EndComp
Wire Wire Line
	4050 3300 4050 3200
Wire Wire Line
	4050 3200 3800 3200
Wire Wire Line
	5300 3250 5200 3250
Wire Wire Line
	5200 3350 5300 3350
Wire Wire Line
	5900 4500 5200 4500
Wire Wire Line
	5200 4600 5900 4600
Wire Wire Line
	5900 4700 5200 4700
Wire Wire Line
	5200 4850 5900 4850
Wire Wire Line
	5900 4950 5200 4950
Wire Wire Line
	5200 5050 5900 5050
Wire Wire Line
	5900 5200 5200 5200
Wire Wire Line
	5200 5300 5900 5300
Wire Wire Line
	5900 5400 5200 5400
$Sheet
S 2000 3750 550  400 
U 61EE6DE0
F0 "Power" 50
F1 "power.sch" 50
F2 "VBUS" I R 2550 3950 50 
$EndSheet
Wire Wire Line
	3000 3950 2800 3950
Wire Wire Line
	3800 3900 4200 3900
Wire Wire Line
	4200 4000 3800 4000
$Sheet
S 4550 2100 800  500 
U 61AFE355
F0 "USB_AUX" 50
F1 "usb_device.sch" 50
F2 "USB_D-" B R 5350 2400 50 
F3 "USB_D+" B R 5350 2300 50 
F4 "VBUS" O L 4550 2350 50 
$EndSheet
Wire Wire Line
	5900 2300 5350 2300
Wire Wire Line
	5350 2400 5900 2400
Wire Wire Line
	7900 6100 5200 6100
Wire Wire Line
	7900 3400 7900 6100
Wire Wire Line
	5200 5650 5900 5650
Wire Wire Line
	5200 5550 5900 5550
Wire Wire Line
	5200 5750 5900 5750
Wire Wire Line
	3900 2900 3800 2900
Wire Wire Line
	2800 2750 2800 3950
Wire Wire Line
	3900 2750 3900 2900
Connection ~ 2800 3950
Wire Wire Line
	2800 3950 2550 3950
$Comp
L Connector_Generic:Conn_01x04 J9
U 1 1 61A82B7E
P 8550 4450
F 0 "J9" H 8630 4442 50  0000 L CNN
F 1 "Conn_01x04" H 8630 4351 50  0000 L CNN
F 2 "" H 8550 4450 50  0001 C CNN
F 3 "~" H 8550 4450 50  0001 C CNN
	1    8550 4450
	-1   0    0    1   
$EndComp
Text Label 8850 4350 0    50   ~ 0
I2C1_SDA
Text Label 8850 4450 0    50   ~ 0
I2C1_SCL
Wire Wire Line
	8750 4350 8850 4350
Wire Wire Line
	8850 4450 8750 4450
$Comp
L power:+3.3V #PWR010
U 1 1 61A89DD5
P 8850 4200
F 0 "#PWR010" H 8850 4050 50  0001 C CNN
F 1 "+3.3V" H 8865 4373 50  0000 C CNN
F 2 "" H 8850 4200 50  0001 C CNN
F 3 "" H 8850 4200 50  0001 C CNN
	1    8850 4200
	1    0    0    -1  
$EndComp
$Comp
L power:GND #PWR017
U 1 1 61A8BB25
P 8850 4600
F 0 "#PWR017" H 8850 4350 50  0001 C CNN
F 1 "GND" H 8855 4427 50  0000 C CNN
F 2 "" H 8850 4600 50  0001 C CNN
F 3 "" H 8850 4600 50  0001 C CNN
	1    8850 4600
	1    0    0    -1  
$EndComp
Wire Wire Line
	8850 4200 8850 4250
Wire Wire Line
	8850 4250 8750 4250
Wire Wire Line
	8750 4550 8850 4550
Wire Wire Line
	8850 4550 8850 4600
$Sheet
S 4200 2900 1000 3300
U 61A89F2B
F0 "MCU" 50
F1 "mcu.sch" 50
F2 "UART1_RX" I R 5200 3750 50 
F3 "USB_D+" B L 4200 3900 50 
F4 "USB_D-" B L 4200 4000 50 
F5 "I2C1_SCL" B R 5200 3250 50 
F6 "I2C1_SDA" B R 5200 3350 50 
F7 "USB_EV_N" I R 5200 6100 50 
F8 "BUS_1_OE_N" O R 5200 5400 50 
F9 "BUS_2_OE_N" O R 5200 5050 50 
F10 "BUS_3_OE_N" O R 5200 4700 50 
F11 "UART2_TX" O L 4200 3000 50 
F12 "UART2_RX" I L 4200 3100 50 
F13 "UART1_TX" O R 5200 3850 50 
F14 "BUS_1_MUX_SEL_0" O R 5200 5200 50 
F15 "BUS_2_MUX_SEL_0" O R 5200 4850 50 
F16 "BUS_3_MUX_SEL_0" O R 5200 4500 50 
F17 "BUS_1_MUX_SEL_1" O R 5200 5300 50 
F18 "BUS_2_MUX_SEL_1" O R 5200 4950 50 
F19 "BUS_3_MUX_SEL_1" O R 5200 4600 50 
F20 "USB_MUX_SEL_0" O R 5200 5550 50 
F21 "USB_MUX_SEL_1" O R 5200 5650 50 
F22 "USB_OE_N" O R 5200 5750 50 
F23 "I2C3_SCL" B R 5200 3500 50 
F24 "I2C3_SDA" B R 5200 3600 50 
$EndSheet
Wire Wire Line
	3900 2750 2800 2750
$Comp
L Connector_Generic:Conn_01x04 J1
U 1 1 61C1BBFB
P 3600 3100
F 0 "J1" H 3680 3092 50  0000 L CNN
F 1 "Conn_01x04" H 3680 3001 50  0000 L CNN
F 2 "" H 3600 3100 50  0001 C CNN
F 3 "~" H 3600 3100 50  0001 C CNN
	1    3600 3100
	-1   0    0    1   
$EndComp
$EndSCHEMATC
