EESchema Schematic File Version 4
EELAYER 30 0
EELAYER END
$Descr A4 11693 8268
encoding utf-8
Sheet 4 12
Title "USB Whisperer"
Date "2021-11-21"
Rev "A"
Comp "AllThingsEmbedded"
Comment1 "Javier Alvarez"
Comment2 ""
Comment3 ""
Comment4 ""
$EndDescr
Text HLabel 10050 5950 0    50   BiDi ~ 0
USB_DEV_1_D-
Text HLabel 10050 6050 0    50   BiDi ~ 0
USB_DEV_1_D+
Text HLabel 10050 5700 0    50   BiDi ~ 0
USB_DEV_2_D-
Text HLabel 10050 5800 0    50   BiDi ~ 0
USB_DEV_2_D+
Text HLabel 10050 6200 0    50   BiDi ~ 0
SBU_1
Text HLabel 10050 6300 0    50   BiDi ~ 0
SBU_2
Text HLabel 10050 5450 0    50   BiDi ~ 0
I2C2_SCL
Text HLabel 10050 5550 0    50   BiDi ~ 0
I2C2_SDA
Text HLabel 3750 4750 0    50   Input ~ 0
BUS_3_MUX_SEL_0
Text Label 10350 5700 0    50   ~ 0
USB_DEV_2_D-
Text Label 10350 5800 0    50   ~ 0
USB_DEV_2_D+
Wire Wire Line
	10350 5700 10050 5700
Wire Wire Line
	10050 5800 10350 5800
Text Label 10350 5950 0    50   ~ 0
USB_DEV_1_D-
Text Label 10350 6050 0    50   ~ 0
USB_DEV_1_D+
Wire Wire Line
	10350 5950 10050 5950
Wire Wire Line
	10050 6050 10350 6050
Text Label 10350 5450 0    50   ~ 0
I2C2_SCL
Text Label 10350 5550 0    50   ~ 0
I2C2_SDA
Wire Wire Line
	10350 5450 10050 5450
Wire Wire Line
	10050 5550 10350 5550
Text Label 10350 6200 0    50   ~ 0
SBU_1
Text Label 10350 6300 0    50   ~ 0
SBU_2
Wire Wire Line
	10350 6200 10050 6200
Wire Wire Line
	10050 6300 10350 6300
Text Label 3200 2150 0    50   ~ 0
USB_DEV_1_D+
Wire Wire Line
	3850 2150 3200 2150
Text Label 3200 2250 0    50   ~ 0
USB_DEV_1_D-
Wire Wire Line
	3850 2250 3200 2250
Text Label 4950 2150 0    50   ~ 0
TR_UART1_TX
Text Label 4950 2250 0    50   ~ 0
TR_UART1_RX
Wire Wire Line
	4850 2150 4950 2150
Wire Wire Line
	4950 2250 4850 2250
Wire Wire Line
	4950 2400 4850 2400
Wire Wire Line
	4850 2500 4950 2500
Text Label 4950 2400 0    50   ~ 0
I2C2_SCL
Text Label 4950 2500 0    50   ~ 0
I2C2_SDA
$Sheet
S 7100 2000 1000 950 
U 61D663B4
F0 "DEV MUX 2" 50
F1 "mux_dev.sch" 50
F2 "SEL0" I L 7100 2750 50 
F3 "SEL1" I L 7100 2850 50 
F4 "TARGET_D+" I L 7100 2150 50 
F5 "TARGET_D-" I L 7100 2250 50 
F6 "UART_TX" I R 8100 2150 50 
F7 "UART_RX" I R 8100 2250 50 
F8 "I2C_SCL" I R 8100 2400 50 
F9 "I2C_SDA" I R 8100 2500 50 
F10 "OE_N" I L 7100 2650 50 
$EndSheet
Text Label 6450 2150 0    50   ~ 0
USB_DEV_2_D+
Wire Wire Line
	7100 2150 6450 2150
Text Label 6450 2250 0    50   ~ 0
USB_DEV_2_D-
Wire Wire Line
	7100 2250 6450 2250
Text Label 8200 2150 0    50   ~ 0
TR_UART2_TX
Text Label 8200 2250 0    50   ~ 0
TR_UART2_RX
Wire Wire Line
	8100 2150 8200 2150
Wire Wire Line
	8200 2250 8100 2250
Wire Wire Line
	8200 2400 8100 2400
Wire Wire Line
	8100 2500 8200 2500
Text Label 8200 2400 0    50   ~ 0
I2C2_SCL
Text Label 8200 2500 0    50   ~ 0
I2C2_SDA
$Sheet
S 3850 4000 1000 950 
U 61D84977
F0 "DEV MUX 3" 50
F1 "mux_dev.sch" 50
F2 "SEL0" I L 3850 4750 50 
F3 "SEL1" I L 3850 4850 50 
F4 "TARGET_D+" I L 3850 4150 50 
F5 "TARGET_D-" I L 3850 4250 50 
F6 "UART_TX" I R 4850 4150 50 
F7 "UART_RX" I R 4850 4250 50 
F8 "I2C_SCL" I R 4850 4400 50 
F9 "I2C_SDA" I R 4850 4500 50 
F10 "OE_N" I L 3850 4650 50 
$EndSheet
Text Label 3200 4150 0    50   ~ 0
SBU_1
Wire Wire Line
	3850 4150 3200 4150
Text Label 3200 4250 0    50   ~ 0
SBU_2
Wire Wire Line
	3850 4250 3200 4250
Text Label 4950 4150 0    50   ~ 0
TR_UART3_TX
Text Label 4950 4250 0    50   ~ 0
TR_UART3_RX
Wire Wire Line
	4850 4150 4950 4150
Wire Wire Line
	4950 4250 4850 4250
Wire Wire Line
	4950 4400 4850 4400
Wire Wire Line
	4850 4500 4950 4500
Text Label 4950 4400 0    50   ~ 0
I2C2_SCL
Text Label 4950 4500 0    50   ~ 0
I2C2_SDA
Text HLabel 3750 2650 0    50   Input ~ 0
BUS_1_OE_N
Text HLabel 7000 2650 0    50   Input ~ 0
BUS_2_OE_N
Text HLabel 3750 4650 0    50   Input ~ 0
BUS_3_OE_N
Text Label 4550 6450 0    50   ~ 0
TR_UART1_TX
Text Label 4550 6550 0    50   ~ 0
TR_UART1_RX
Text Label 4550 6650 0    50   ~ 0
TR_UART2_TX
Text Label 4550 6750 0    50   ~ 0
TR_UART2_RX
Text Label 4550 6850 0    50   ~ 0
TR_UART3_TX
Text Label 4550 6950 0    50   ~ 0
TR_UART3_RX
Text HLabel 3750 4850 0    50   Input ~ 0
BUS_3_MUX_SEL_1
Text HLabel 7000 2750 0    50   Input ~ 0
BUS_2_MUX_SEL_0
Text HLabel 7000 2850 0    50   Input ~ 0
BUS_2_MUX_SEL_1
Text HLabel 3750 2750 0    50   Input ~ 0
BUS_1_MUX_SEL_0
Text HLabel 3750 2850 0    50   Input ~ 0
BUS_1_MUX_SEL_1
$Sheet
S 3850 2000 1000 950 
U 61D2FA96
F0 "DEV MUX 1" 50
F1 "mux_dev.sch" 50
F2 "SEL0" I L 3850 2750 50 
F3 "SEL1" I L 3850 2850 50 
F4 "TARGET_D+" I L 3850 2150 50 
F5 "TARGET_D-" I L 3850 2250 50 
F6 "UART_TX" I R 4850 2150 50 
F7 "UART_RX" I R 4850 2250 50 
F8 "I2C_SCL" I R 4850 2400 50 
F9 "I2C_SDA" I R 4850 2500 50 
F10 "OE_N" I L 3850 2650 50 
$EndSheet
$Sheet
S 3150 6350 1300 700 
U 619F3501
F0 "Voltage Level Translation" 50
F1 "level_translation.sch" 50
F2 "UART1_TX" I L 3150 6450 50 
F3 "UART1_RX" O L 3150 6550 50 
F4 "UART2_TX" I L 3150 6650 50 
F5 "UART2_RX" O L 3150 6750 50 
F6 "UART3_TX" I L 3150 6850 50 
F7 "UART3_RX" O L 3150 6950 50 
F8 "TR_UART1_TX" O R 4450 6450 50 
F9 "TR_UART1_RX" I R 4450 6550 50 
F10 "TR_UART2_TX" O R 4450 6650 50 
F11 "TR_UART2_RX" I R 4450 6750 50 
F12 "TR_UART3_TX" O R 4450 6850 50 
F13 "TR_UART3_RX" I R 4450 6950 50 
$EndSheet
Wire Wire Line
	4450 6450 4550 6450
Wire Wire Line
	4550 6550 4450 6550
Wire Wire Line
	4450 6650 4550 6650
Wire Wire Line
	4550 6750 4450 6750
Wire Wire Line
	4450 6850 4550 6850
Wire Wire Line
	4550 6950 4450 6950
$Sheet
S 7050 4000 1250 1050
U 61A7ECF3
F0 "USB MUX" 50
F1 "usb_mux.sch" 50
F2 "OE_N" I L 7050 4650 50 
F3 "SEL0" I L 7050 4750 50 
F4 "SEL1" I L 7050 4850 50 
F5 "TARGET_D+" I L 7050 4150 50 
F6 "TARGET_D-" I L 7050 4250 50 
F7 "DEV1_D+" I R 8300 4150 50 
F8 "DEV1_D-" I R 8300 4250 50 
F9 "DEV2_D+" I R 8300 4400 50 
F10 "DEV2_D-" I R 8300 4500 50 
F11 "DEV3_D+" I R 8300 4650 50 
F12 "DEV3_D-" I R 8300 4750 50 
$EndSheet
Text HLabel 6900 4750 0    50   Input ~ 0
USB_MUX_SEL_0
Text HLabel 6900 4850 0    50   Input ~ 0
USB_MUX_SEL_1
Text HLabel 6900 4650 0    50   Input ~ 0
USB_OE_N
Text Label 8450 4150 0    50   ~ 0
USB_DEV_1_D+
Text Label 8450 4250 0    50   ~ 0
USB_DEV_1_D-
Text Label 8450 4400 0    50   ~ 0
USB_DEV_2_D+
Text Label 8450 4500 0    50   ~ 0
USB_DEV_2_D-
Text Label 8450 4650 0    50   ~ 0
SBU_1
Text Label 8450 4750 0    50   ~ 0
SBU_2
Wire Wire Line
	8450 4150 8300 4150
Wire Wire Line
	8450 4250 8300 4250
Wire Wire Line
	8300 4400 8450 4400
Wire Wire Line
	8450 4500 8300 4500
Wire Wire Line
	8300 4650 8450 4650
Wire Wire Line
	8450 4750 8300 4750
Wire Wire Line
	7050 4650 6900 4650
Wire Wire Line
	6900 4750 7050 4750
Wire Wire Line
	7050 4850 6900 4850
Text HLabel 3000 6450 0    50   Input ~ 0
UART1_TX
Text HLabel 3000 6550 0    50   Output ~ 0
UART1_RX
Text HLabel 3000 6650 0    50   Input ~ 0
UART2_TX
Text HLabel 3000 6750 0    50   Output ~ 0
UART2_RX
Text HLabel 3000 6850 0    50   Input ~ 0
UART3_TX
Text HLabel 3000 6950 0    50   Output ~ 0
UART3_RX
Wire Wire Line
	3000 6450 3150 6450
Wire Wire Line
	3150 6550 3000 6550
Wire Wire Line
	3000 6650 3150 6650
Wire Wire Line
	3150 6750 3000 6750
Wire Wire Line
	3000 6850 3150 6850
Wire Wire Line
	3150 6950 3000 6950
Text HLabel 6900 4150 0    50   BiDi ~ 0
USB_AUX_D+
Text HLabel 6900 4250 0    50   BiDi ~ 0
USB_AUX_D-
Wire Wire Line
	6900 4150 7050 4150
Wire Wire Line
	7050 4250 6900 4250
Wire Wire Line
	7100 2650 7000 2650
Wire Wire Line
	7000 2750 7100 2750
Wire Wire Line
	7100 2850 7000 2850
Wire Wire Line
	3850 2650 3750 2650
Wire Wire Line
	3750 2750 3850 2750
Wire Wire Line
	3850 2850 3750 2850
Wire Wire Line
	3750 4650 3850 4650
Wire Wire Line
	3850 4750 3750 4750
Wire Wire Line
	3750 4850 3850 4850
$EndSCHEMATC
